<!DOCTYPE html>
<html lang="id" class="scroll-smooth">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SIFORTECH - Layanan Teknis Terpercaya</title>
  <meta name="description"
    content="SIFORTECH menyediakan layanan teknis terpercaya: AutoCAD, Revit, GIS, Desain Digital, hingga Admin Fleksibel. Hubungi kami via WhatsApp sekarang!" />
  <meta property="og:title" content="SIFORTECH - Layanan Teknis Terpercaya" />
  <meta property="og:description"
    content="SIFORTECH menyediakan layanan teknis terpercaya: AutoCAD, Revit, GIS, Desain Digital, hingga Admin Fleksibel. Hubungi kami via WhatsApp sekarang!" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sifortech.example.com" />
  <meta property="og:image" content="https://sifortech.example.com/og-image.jpg" />

  <!-- Fonts: Inter from Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Custom CSS for Material Design 3 Theme & Animations -->
  <style>
    :root {
      /* Light Theme Colors (Material Design 3 Inspired) */
      --color-primary: #ce2127;
      --color-primary-rgb: 25, 118, 210;
      --color-on-primary: #ffffff;
      --color-background: #f9f9fb;
      --color-surface: #ffffff;
      --color-surface-container: #f0f2f5;
      --color-on-surface: #1d1e1a;
      --color-on-surface-variant: #42474e;
      --color-outline: #73777f;
      --color-shadow: rgba(0, 0, 0, 0.1);
      --color-hero-start: #1976d2;
      --color-hero-end: #3b82f6;
      --hero-title-on-surface: #ce2127;
    }

    /* Dark Theme Colors */
    body[data-theme="dark"] {
      --color-primary: #ce2127;
      --color-primary-rgb: 100, 181, 246;
      --color-on-primary: #003355;
      --color-background: #121212;
      --color-surface: #1e1e1e;
      --color-surface-container: #2c2c2e;
      --color-on-surface: #e3e3e3;
      --color-on-surface-variant: #c3c6cf;
      --color-outline: #8d9199;
      --color-shadow: rgba(0, 0, 0, 0.25);
      --color-hero-start: #1e40af;
      --color-hero-end: #1976d2;
      --hero-title-on-surface: #ffffff;
    }

    /* Base Styles */
    html {
      font-family: 'Inter', sans-serif;
    }

    body {
      background-color: var(--color-background);
      color: var(--color-on-surface);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    h1,
    h2 {
      color: var(--hero-title-on-surface)
    }


    h3,
    h4,
    h5,
    h6 {
      color: var(--color-on-surface);
    }

    p {
      color: var(--color-on-surface-variant);
    }

    /* Header */
    header.sticky-header {
      backdrop-filter: saturate(180%) blur(10px);
      -webkit-backdrop-filter: saturate(180%) blur(10px);
      background-color: rgba(249, 249, 251, 0.8);
      border-bottom: 1px solid var(--color-outline-variant, #e0e0e0);
      transition: background-color 0.3s ease;
    }

    body[data-theme="dark"] header.sticky-header {
      background-color: rgba(18, 18, 18, 0.8);
      border-bottom: 1px solid var(--color-outline-variant, #3a3a3a);
    }

    header nav a {
      color: var(--color-on-surface-variant);
    }

    header nav a:hover {
      color: var(--color-primary);
    }


    /* Hero Section */
    .hero-bg {
      background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('https://sifortech.pages.dev/assets/hero-bg.png');
      background-size: cover;
      background-position: center;
    }

    /* Card Component */
    .material-card {
      background: var(--color-surface);
      color: var(--color-on-surface);
      border: 1px solid var(--color-outline-variant, #e0e0e0);
      border-radius: 16px;
      box-shadow: 0 4px 12px var(--color-shadow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    body[data-theme="dark"] .material-card {
      border: 1px solid var(--color-outline-variant, #3a3a3a);
    }

    .material-card:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 8px 24px var(--color-shadow);
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      border-radius: 9999px;
      padding: 0.75rem 1.5rem;
      transition: all 0.3s ease;
      cursor: pointer;
      text-decoration: none;
    }

    /* Primary Button (Filled) */
    .btn-primary {
      background-color: var(--color-primary);
      color: var(--color-on-primary);
      box-shadow: 0 2px 8px rgba(var(--color-primary-rgb), 0.3);
    }

    .btn-primary:hover {
      filter: brightness(1.1);
      box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.4);
    }

    /* Secondary Button (Outlined) */
    .btn-outlined {
      background-color: transparent;
      color: var(--color-primary);
      border: 1px solid var(--color-outline);
    }

    .btn-outlined:hover {
      background-color: rgba(var(--color-primary-rgb), 0.08);
    }


    /* Animation classes */
    .animate-fade-slide {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }

    .animate-fade-slide.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Catalog Card Animation */
    .catalog-card-item {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s ease-out, transform 0.5s ease-out;
    }

    .catalog-card-item.loaded {
      opacity: 1;
      transform: translateY(0);
    }

    /* Loader Overlay */
    #catalog-loader {
      position: absolute;
      inset: 0;
      background-color: rgba(255, 255, 255, 0.8);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
      border-radius: 1.5rem;
      /* Match parent container */
      opacity: 1;
      transition: opacity 0.4s ease-out;
    }

    body[data-theme="dark"] #catalog-loader {
      background-color: rgba(18, 18, 18, 0.85);
    }

    #catalog-loader.fade-out {
      opacity: 0;
    }

    .spinner {
      width: 48px;
      height: 48px;
      border: 5px solid rgba(var(--color-primary-rgb), 0.2);
      border-top-color: var(--color-primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
  </style>

  <!-- JSON-LD for SEO -->
  <script type="application/ld+json" id="org-jsonld">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "SIFORTECH",
      "description": "Layanan teknis terpercaya: AutoCAD, Revit, GIS, Desain Digital, hingga Admin Fleksibel.",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Tembilahan",
        "addressLocality": "Indragiri Hilir",
        "addressRegion": "Riau",
        "addressCountry": "ID"
      },
      "telephone": "+6281234567890",
      "sameAs": [
        "https://wa.me/6281234567890",
        "https://www.facebook.com/sifortech",
        "https://www.instagram.com/fajr1820",
        "https://www.linkedin.com/company/sifortech"
      ]
    }
  </script>
</head>

<body data-theme="light">
  <!-- Header -->
  <header id="header" class="sticky-header sticky top-0 z-50 flex items-center justify-between px-4 py-3 sm:px-6">
    <a href="#hero" class="flex items-center gap-2 text-2xl font-bold" style="color: var(--hero-title-on-surface)">
      <img src="https://sifortech.pages.dev/assets/logo/sifortech.png" alt="[logo] SIFORTECH"
        class="h-8 w-8 object-contain">
      <span>SIFORTECH</span>
    </a>
    <nav class="hidden md:flex space-x-6 font-medium">
      <a href="#hero" class="transition">Home</a>
      <a href="#katalog" class="transition">Katalog</a>
      <a href="#kontak" class="transition">Kontak</a>
    </nav>
    <button id="dark-toggle" aria-label="Toggle Dark Mode"
      class="ml-4 p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition">
      <svg id="icon-moon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
        style="color: var(--color-on-surface-variant);" fill="none" viewBox="0 0 24 24" stroke="currentColor"
        stroke-width="2" title="Aktifkan mode gelap">
        <path stroke-linecap="round" stroke-linejoin="round" d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z" />
      </svg>
      <svg id="icon-sun" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-500 hidden" fill="none"
        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" title="Aktifkan mode terang">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M12 3v1m0 16v1m8.485-8.485h1M3 12H2m15.364 6.364l.707.707M6.343 6.343l-.707-.707m12.728 0l-.707-.707M6.343 17.657l-.707.707M12 7a5 5 0 100 10 5 5 0 000-10z" />
      </svg>
    </button>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Hero Section -->
    <section id="hero" class="hero-bg rounded-3xl mt-8 p-10 md:p-20 text-white relative overflow-hidden">
      <div class="max-w-3xl mx-auto text-center">
        <h1 class="text-4xl sm:text-5xl font-extrabold mb-4 drop-shadow-md">SIFORTECH</h1>
        <p class="text-lg sm:text-xl mb-8 drop-shadow-md text-white/90">Layanan teknis terpercaya: AutoCAD, Revit, GIS,
          Desain Digital, hingga Admin Fleksibel.</p>
        <a href="#" id="hero-wa-btn" class="btn btn-primary bg-white text-red-600 hover:bg-white/50"
          aria-label="Chat Sekarang di WhatsApp" target="_blank" rel="noopener noreferrer">Chat Sekarang di WhatsApp</a>

      </div>
    </section>

    <!-- Tentang Section -->
    <section id="tentang" class="mt-16 max-w-4xl mx-auto animate-fade-slide" tabindex="0"
      aria-labelledby="tentang-title">
      <h2 id="tentang-title" class="text-3xl font-bold text-center mb-6">Tentang Kami</h2>
      <p class="text-center max-w-3xl mx-auto leading-relaxed">SIFORTECH hadir sebagai partner kerja yang bisa
        diandalkan, berfokus pada desain dan administrasi agar proses kerja lebih simpel, cepat, dan rapi. Dengan
        pengalaman teknis dan kreativitas visual, setiap proyek ditangani secara profesional namun tetap fleksibel,
        sehingga pekerjaan terasa lebih ringan, hasil lebih tepat, dan perjalanan proyek berjalan nyaman dari awal
        sampai akhir.</p>
    </section>

    <!-- Katalog Section: populated dynamically by JS -->
    <section id="katalog" class="mt-20 max-w-7xl mx-auto relative" aria-labelledby="katalog-title">
      <h2 id="katalog-title" class="text-3xl font-bold text-center mb-8">Katalog Produk & Layanan</h2>
      <div id="catalog-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 px-4">
        <!-- JS will populate this -->
      </div>
      <div id="catalog-fallback" class="text-center mt-8 hidden">Katalog belum tersedia. Silakan hubungi kami via
        WhatsApp untuk info produk & harga.</div>
    </section>

    <!-- Jam Operasional Section -->
    <section id="operasional" class="mt-20 max-w-3xl mx-auto animate-fade-slide" tabindex="0"
      aria-labelledby="operasional-title">
      <h2 id="operasional-title" class="text-3xl font-bold text-center mb-6">Jam Operasional</h2>
      <dl class="text-center text-lg space-y-2">
        <div>
          <dt class="font-semibold" style="color: var(--color-on-surface);">Setiap Hari</dt>
          <dd>08:00–17:00 dan 19:00–22:00</dd>
        </div>
      </dl>
    </section>

    <!-- Kontak Section -->
    <section id="kontak" class="mt-20 max-w-4xl mx-auto animate-fade-slide" tabindex="0" aria-labelledby="kontak-title">
      <h2 id="kontak-title" class="text-3xl font-bold text-center mb-6">Lokasi & Kontak</h2>
      <div class="flex flex-col md:flex-row md:justify-center md:space-x-12 items-center text-center md:text-left">
        <address class="not-italic mb-6 md:mb-0">
          <p class="font-semibold text-lg" style="color: var(--color-on-surface);">Alamat</p>
          <p>Tembilahan, Indragiri Hilir, Riau</p>
        </address>
        <div class="mb-6 md:mb-0">
          <a href="https://maps.app.goo.gl/Rs5q6Nnqh9SQA4ti8" target="_blank" rel="noopener noreferrer"
            class="btn btn-outlined" aria-label="Lihat lokasi di Google Maps">Lihat di Google Maps</a>
        </div>
        <div>
          <a href="#" id="kontak-wa-btn" class="btn btn-primary" aria-label="Chat WhatsApp" target="_blank"
            rel="noopener noreferrer">Chat WhatsApp</a>
        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="mt-20 py-12" style="background-color: var(--color-surface-container);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center">
      <div class="text-center md:text-left mb-6 md:mb-0">
        <p>&copy; <span id="year"></span> SIFORTECH. Semua hak dilindungi.</p>
      </div>
      <nav class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-6 text-center">
        <a href="#hero" class="hover:text-blue-500 transition">Home</a>
        <a href="#katalog" class="hover:text-blue-500 transition">Katalog</a>
        <a href="#kontak" class="hover:text-blue-500 transition">Kontak</a>
      </nav>
      <div class="flex space-x-4 mt-6 md:mt-0">
        <a href="https://www.facebook.com/sifortech" target="_blank" rel="noopener noreferrer"
          aria-label="Facebook SIFORTECH" class="hover:text-blue-600 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
            <path
              d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
          </svg>
        </a>
        <a href="https://www.instagram.com/fajr1820"_blank" rel="noopener noreferrer"
          aria-label="Instagram SIFORTECH" class="hover:text-pink-600 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
            <path
              d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM12 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
          </svg>
        </a>
        <a href="https://www.linkedin.com/company/sifortech" target="_blank" rel="noopener noreferrer"
          aria-label="LinkedIn SIFORTECH" class="hover:text-blue-600 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
            <path
              d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
          </svg>
        </a>
      </div>
    </div>
  </footer>

  <!-- Sticky WhatsApp Button -->
  <a href="#" id="whatsapp-sticky"
    class="fixed bottom-6 right-6 z-50 rounded-full w-14 h-14 flex items-center justify-center shadow-lg transition-transform hover:scale-110"
    style="background-color: #25D366;" aria-label="Chat langsung di WhatsApp" target="_blank" rel="noopener noreferrer">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-white" fill="currentColor" viewBox="0 0 24 24">
      <path
        d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.742.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488" />
    </svg>
  </a>

  <script>
    // Auto year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Dark mode toggle
    const darkToggle = document.getElementById('dark-toggle');
    const iconSun = document.getElementById('icon-sun');
    const iconMoon = document.getElementById('icon-moon');
    const body = document.body;

    const applyTheme = (mode) => {
      if (mode === 'dark') {
        body.setAttribute('data-theme', 'dark');
        iconSun.classList.remove('hidden');
        iconMoon.classList.add('hidden');
      } else {
        body.setAttribute('data-theme', 'light');
        iconSun.classList.add('hidden');
        iconMoon.classList.remove('hidden');
      }
    };

    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      applyTheme('dark');
    } else {
      applyTheme('light');
    }

    darkToggle.addEventListener('click', () => {
      const current = body.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
      const next = current === 'dark' ? 'light' : 'dark';
      applyTheme(next);
      localStorage.setItem('theme', next);
    });

    // CONFIG: ganti APPS_SCRIPT_URL dan waNumber sesuai milikmu
    const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbybJSseDbgmp1rCMxsnuwp5MUOgdlzvOCMg6KThOVl3jx3JcRIS3LiquljSEmbixjZXRw/exec';
    const waNumber = '+6289698910380';

    function numberOnly(str) {
      return String(str).replace(/\D/g, '');
    }

    function safeEncode(s) {
      return encodeURIComponent(String(s || '').trim());
    }

    // Update hero & kontak & sticky WA anchors
    function updateStaticWA() {
      const hero = document.getElementById('hero-wa-btn');
      const kontak = document.getElementById('kontak-wa-btn');
      const sticky = document.getElementById('whatsapp-sticky');
      const baseWaURL = `https://wa.me/${numberOnly(waNumber)}`;
      if (hero) hero.href = `${baseWaURL}?text=${safeEncode('Halo, saya tertarik dengan layanan SIFORTECH. Mohon informasi lebih lanjut.')}`;
      if (kontak) kontak.href = `${baseWaURL}?text=${safeEncode('Halo, saya ingin menghubungi SIFORTECH untuk konsultasi.')}`;
      if (sticky) sticky.href = `${baseWaURL}?text=${safeEncode('Halo, SIFORTECH!')}`;
    }

    updateStaticWA();

    // Catalog render from Google Sheets JSON endpoint
    async function fetchAndRenderCatalog() {
      const container = document.getElementById('catalog-container');
      const fallback = document.getElementById('catalog-fallback');
      const catalogSection = document.getElementById('katalog');

      container.innerHTML = '';
      fallback.classList.add('hidden');

      // Show loader
      const loader = document.createElement('div');
      loader.id = 'catalog-loader';
      loader.innerHTML = `
        <div class="spinner"></div>
        <p class="mt-4 text-sm font-medium" style="color: var(--color-on-surface-variant);">Loading Katalog...</p>
      `;
      catalogSection.appendChild(loader);

      try {
        const res = await fetch(APPS_SCRIPT_URL, {
          cache: 'no-store'
        });
        if (!res.ok) throw new Error('Fetch gagal: ' + res.status);
        const data = await res.json();
        if (!Array.isArray(data) || data.length === 0) throw new Error('Data kosong');

        data.forEach((item) => {
          const p = {
            name: item.name || 'Produk SIFORTECH',
            price: item.price || '',
            desc: item.desc || '',
            message: item.message || `Halo, saya tertarik dengan ${item.name || 'produk'}`,
            image: item.image || `https://placehold.co/600x400/ce2127/fff?text=${encodeURIComponent(item.name || 'Produk')}`,
          };

          const art = document.createElement('article');
          art.className = 'material-card catalog-card-item p-6 flex flex-col';
          art.setAttribute('role', 'article');
          art.setAttribute('aria-label', `Layanan ${p.name}`);

          art.innerHTML = `
            <img src="${p.image}" alt="${p.name} — SIFORTECH" loading="lazy" class="rounded-lg mb-4 object-cover h-48 w-full">
            <h3 class="text-xl font-bold mb-2">${p.name}</h3>
            <p class="flex-grow text-sm">${p.desc}</p>
            <div class="mt-4">
  ${p.price && p.price.includes('–')
              ? `<span class="line-through text-gray-400 mr-2">Rp ${Number(item.priceNum).toLocaleString('id-ID')}</span>
       <span class="text-red-600 font-bold">${p.price}</span>`
              : `<span class="text-red-600 font-bold">${p.price}</span>`}
</div>

            <a class="mt-6 btn btn-primary" href="#" role="button" aria-label="Pesan ${p.name} via WhatsApp" data-message="${p.message}">Pesan Sekarang</a>
          `;
          container.appendChild(art);
        });

        // Attach whatsapp links
        document.querySelectorAll('#catalog-container .btn-primary').forEach(btn => {
          const message = btn.dataset.message || 'Halo, saya tertarik dengan layanan Anda.';
          btn.href = `https://wa.me/${numberOnly(waNumber)}?text=${safeEncode(message)}`;
          btn.target = '_blank';
          btn.rel = 'noopener noreferrer';
        });

        injectProductsJSONLD(data);

        // Trigger card animations
        setTimeout(() => {
          const cards = container.querySelectorAll('.catalog-card-item');
          cards.forEach((card, index) => {
            setTimeout(() => {
              card.classList.add('loaded');
            }, index * 100);
          });
        }, 100);


      } catch (err) {
        console.error('Catalog load error', err);
        fallback.classList.remove('hidden');
      } finally {
        // Fade out and remove loader
        loader.classList.add('fade-out');
        loader.addEventListener('transitionend', () => loader.remove(), { once: true });
      }
    }

    function injectProductsJSONLD(data) {
      try {
        const graph = data.map((p, i) => {
          const price = p.priceNum ? Number(String(p.priceNum).replace(/\D/g, '')) : null;
          return {
            '@type': 'Product',
            '@id': `#product-${i + 1}`,
            'name': p.name,
            'description': p.desc,
            'image': p.image,
            'offers': {
              '@type': 'Offer',
              'priceCurrency': 'IDR',
              'price': price ? String(price) : '',
              'availability': 'http://schema.org/InStock'
            }
          };
        });
        const jsonld = {
          '@context': 'https://schema.org',
          '@graph': graph
        };
        const old = document.getElementById('products-jsonld');
        if (old) old.remove();
        const s = document.createElement('script');
        s.id = 'products-jsonld';
        s.type = 'application/ld+json';
        s.text = JSON.stringify(jsonld, null, 2);
        document.head.appendChild(s);
      } catch (e) {
        console.warn('JSON-LD inject error', e);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      fetchAndRenderCatalog();

      // Intersection observer for fade-in animations
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add('visible');
        });
      }, {
        threshold: 0.1
      });
      document.querySelectorAll('.animate-fade-slide').forEach(el => observer.observe(el));
    });
  </script>
</body>

</html>